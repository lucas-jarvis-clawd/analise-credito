{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 Documenta\'e7\'e3o T\'e9cnica: Layout CRM de Cr\'e9dito (React)Este documento descreve a estrutura, l\'f3gica de neg\'f3cio e funcionamento do componente CRM_Credito_Layout.tsx. O sistema \'e9 um Front-end em React desenhado para otimizar a esteira de valida\'e7\'e3o de cr\'e9dito, substituindo processos manuais em planilhas por uma interface web interativa.1. Vis\'e3o GeralO sistema funciona como um "Single Page Application" (SPA) simplificado, onde o analista de cr\'e9dito pode:Visualizar uma Fila de Pedidos bloqueados (regra 36/80).Selecionar um pedido para entrar no Modo de Valida\'e7\'e3o (Wizard).Preencher dados de an\'e1lise (Sintegra, Boa Vista, S\'f3cios).Gerar Automaticamente pareceres t\'e9cnicos e e-mails para representantes baseados em templates pr\'e9-definidos.2. Estrutura de Dados e Configura\'e7\'e3o2.1. Templates de Parecer (PARECER_TEMPLATES)A "intelig\'eancia" da comunica\'e7\'e3o est\'e1 centralizada na constante PARECER_TEMPLATES.Padr\'e3o de Projeto: Utiliza um objeto dicion\'e1rio onde a chave \'e9 o ID do parecer (ex: 'LIMITADO', 'SOLICITAR_DOCS').Funcionalidade: Cada template cont\'e9m:label: Nome exibido no dropdown.emailSubject: Assunto padr\'e3o do e-mail.requiresValue: Booleano (true/false) que indica se a UI deve mostrar um campo extra (ex: para digitar o valor do limite aprovado).emailBody: Uma fun\'e7\'e3o que recebe os dados do cliente e retorna a string formatada do corpo do e-mail.2.2. Dados Simulados (mockQueue)Simula a resposta de uma API (Backend).Cont\'e9m array de objetos com dados do pedido, cliente, restri\'e7\'f5es pr\'e9-carregadas (Protestos) e v\'ednculos encontrados.Nota: Em produ\'e7\'e3o, isso seria substitu\'eddo por um fetch ou axios.get para seu banco de dados.3. Gerenciamento de Estado (useState)O componente utiliza o Hook useState para gerenciar a interatividade. Os estados s\'e3o divididos em tr\'eas categorias:3.1. Navega\'e7\'e3oselectedOrder: Guarda o objeto do pedido selecionado. Se null, mostra a lista (Fila); se preenchido, mostra o Wizard de an\'e1lise.activeTab: Controle da sidebar (Fila, Hist\'f3rico, etc.).analysisStep: Controla qual aba do Wizard est\'e1 vis\'edvel (1. Cadastro, 2. V\'ednculos, 3. Financeiro, etc.).rightPanelTab: Alterna entre ver o "Texto CRM" (T\'e9cnico) e "E-mail Rep" (Comunica\'e7\'e3o) no painel lateral direito.3.2. Formul\'e1rio de An\'e1liseEstes estados armazenam o que o analista digita durante a valida\'e7\'e3o:pefin, acaoJudicial, cheque: Objetos contendo \{ qtd, valor, data \}.score: Valor num\'e9rico (0-1000).socios, participacoes: Arrays de objetos para listas din\'e2micas.movimentacaoInput: Campo texto livre para movimenta\'e7\'e3o financeira (com l\'f3gica de convers\'e3o "26" -> "26.000").3.3. Decis\'e3oselectedParecer: A chave do template escolhido no dropdown.limitValue: Valor monet\'e1rio caso o parecer seja "LIMITADO".parecerTexto: O texto final gerado para colar no sistema ERP.emailSubject, emailBody: O conte\'fado do e-mail gerado.4. L\'f3gica Principal (useEffect)O "c\'e9rebro" da automa\'e7\'e3o reside no useEffect que monitora as mudan\'e7as nos inputs.4.1. Gatilhos (Dependencies)O efeito roda sempre que qualquer um destes muda:[selectedOrder, pefin, acaoJudicial, cheque, movimentacaoInput, socios, participacoes, score, selectedParecer, limitValue]4.2. Processo de Gera\'e7\'e3o de TextoC\'e1lculo de Restri\'e7\'f5es: Soma as quantidades de Protestos (do mock) + PEFIN + A\'e7\'e3o Judicial + Cheques (dos inputs). Se > 0, monta a string detalhada C/ RESTRI\'c7\'d5ES (...).Formata\'e7\'e3o Financeira: Detecta se o usu\'e1rio digitou um n\'famero curto (ex: "26") e converte para moeda ("R$ 26.000,00"), ou mant\'e9m o texto original se n\'e3o for n\'famero.Montagem dos S\'f3cios/Participa\'e7\'f5es: Itera sobre os arrays e formata a lista em uma \'fanica string separada por barras.Montagem Final (CRM): Concatena todas as vari\'e1veis no padr\'e3o:[DECIS\'c3O] DATA - TIPO - FUNDA\'c7\'c3O - SIMEI - RESTRI\'c7\'d5ES - CRED - SCORE - S\'d3CIOS - PARTS4.3. Processo de Gera\'e7\'e3o de E-mailVerifica se h\'e1 um selectedParecer.Busca o template correspondente em PARECER_TEMPLATES.Executa a fun\'e7\'e3o emailBody(cliente, marca, valorExtra).Adiciona um cabe\'e7alho padr\'e3o com ID do Pedido e Valor.5. Interface de Usu\'e1rio (UI)O layout \'e9 constru\'eddo com Tailwind CSS para estiliza\'e7\'e3o r\'e1pida e responsiva.Destaques da UI:Wizard de Passos: Abas superiores (Step 1, Step 2...) que mostram \'edcones e navegam condicionalmente pelo conte\'fado.Campos Din\'e2micos:Score Slider: Uma barra deslizante que muda de cor (Vermelho/Amarelo/Verde) baseada no valor do score (fun\'e7\'f5es auxiliares getScoreColor).Input Condicional: O campo "Valor do Limite" s\'f3 aparece se o parecer selecionado tiver requiresValue: true.Listas Din\'e2micas: Em "S\'f3cios" e "Participa\'e7\'f5es", o m\'e9todo .map() renderiza os inputs, permitindo adicionar m\'faltiplos itens (embora a fun\'e7\'e3o de "Adicionar" precise ser conectada aos bot\'f5es na interface).6. Bibliotecas Utilizadasreact: Core framework.lucide-react: \'cdcones leves e modernos (User, DollarSign, Mail, etc.).Intl.NumberFormat: API nativa do JavaScript para formata\'e7\'e3o de moeda BRL.7. Como integrar com Backend (Futuro)Para tornar este front-end funcional com dados reais:Substituir mockQueue por uma chamada api.get('/pedidos/fila').No clique de "Concluir", enviar um api.post('/analise/salvar', \{ ...states \}).Carregar dados pr\'e9vios de protestos/sintegra diretamente no selectedOrder ao iniciar.}